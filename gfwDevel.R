# global fishing watch api
library(yaml)
secrets <- read_yaml('.secrets/secrets.yaml')
devtools::install_github("GlobalFishingWatch/gfwr")
library(gfwr)

pt_json = '{
    "geojson":{
        "type": "Polygon",
        "coordinates": [[[-119.4, 34.0], [-119.4, 33.0], [-118.0, 33.0], [-118.0, 34.0], [-119.4, 34.0]]]
    }
}'

hm <- get_raster(
    spatial_resolution = 'high',
    temporal_resolution = 'daily',
    group_by = 'vessel_id',
    date_range = '2021-06-01,2021-12-31',
    region = pt_json,
    region_source = 'user_json',
    key = secrets$gfw_key
)
# looks like only fishing vessels, no carriers.Other options
install.packages('gfwr')

region_json = '{"geojson":{"type":"Polygon","coordinates":[[[-76.11328125,-26.273714024406416],
[-76.201171875,-26.980828590472093],[-76.376953125,-27.527758206861883],[-76.81640625,-28.30438068296276],
[-77.255859375,-28.767659105691244],[-77.87109375,-29.152161283318918],[-78.486328125,-29.45873118535532],
[-79.189453125,-29.61167011519739],[-79.892578125,-29.6880527498568],[-80.595703125,-29.61167011519739],
[-81.5625,-29.382175075145277],[-82.177734375,-29.07537517955835],[-82.705078125,-28.6905876542507],
[-83.232421875,-28.071980301779845],[-83.49609375,-27.683528083787756],[-83.759765625,-26.980828590472093],
[-83.84765625,-26.35249785815401],[-83.759765625,-25.64152637306576],[-83.583984375,-25.16517336866393],
[-83.232421875,-24.447149589730827],[-82.705078125,-23.966175871265037],[-82.177734375,-23.483400654325635],
[-81.5625,-23.241346102386117],[-80.859375,-22.998851594142906],[-80.15625,-22.917922936146027],
[-79.453125,-22.998851594142906],[-78.662109375,-23.1605633090483],[-78.134765625,-23.40276490540795],
[-77.431640625,-23.885837699861995],[-76.9921875,-24.28702686537642],[-76.552734375,-24.846565348219727],
[-76.2890625,-25.48295117535531],[-76.11328125,-26.273714024406416]]]}}'

hm <- get_raster(spatial_resolution = 'low',
           temporal_resolution = 'daily',
           group_by = 'vessel_id',
           date_range = '2021-01-01,2021-12-31',
           region = region_json,
           region_source = 'user_json',
           key = secrets$gfw_key)
